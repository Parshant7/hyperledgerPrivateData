FDA
Ranbaxy
MedlineIndustries
UnitedHealthGroup


commands 
fabric-ca-client enroll -u https://admin:adminpw@fda.com:7054 --caname FDA-ca --tls.certfiles "${PWD}/fabric-ca/fda.com/certs/ca-cert.pem"


  fabric-ca-client register --caname ca-org1 --id.name user1 --id.secret user1pw --id.type client --tls.certfiles "${PWD}/organizations/fabric-ca/org1/ca-cert.pem"

  fabric-ca-client enroll -u https://user1:user1pw@org1.example.com:7054 --caname ca-org1 -M "${PWD}/fabric-ca/fda.com/users/User1@fda.com/msp" --tls.certfiles "${PWD}/fabric-ca/fda.com/ca-cert.pem"


fabric-ca-client enroll -u https://admin:adminpw@ranbaxy.com:6054 --caname FDA-ca --tls.certfiles "${PWD}/fabric-ca/ranbaxy.com/certs/ca-cert.pem"



I have two docker-compose files located inside different folders. This is the folder structure. It also includes networkUP.sh and networkDown.sh

folder structure

This is the compose-ca1.yaml

compose-ca1.yaml

this is the compose-ca2.yaml

enter image description here

Here is the networkUp.sh file code enter image description here

Here is the networkDown.sh file code enter image description here

when I execute these two files, containers up successfully and down successfully console

but lets say if I change this

COMPOSE_CA_FILES=" -f compose/compose-ca1.yaml -f compose2/compose-ca2.yaml " 

to this

COMPOSE_CA_FILES=" -f compose2/compose-ca2.yaml  -f compose/compose-ca1.yaml"  in networkDown.sh file I get the follwing errors, and the containers won't stop. enter image description here

It means if I don't follow the same sequence while docker-compose up and docker-compose down, I get the error. Also, if I down the compose file separately through docker-compose then the other automatically gets down. If I put both (compose-ca1.yaml and compose-ca2.yaml) in the same folder then the issue gets resolved. My question is why in the first case it's behaving differently.





CHAINCODE TRANSACTIONS

export PATH=${PWD}/../bin:$PATH
export FABRIC_CFG_PATH=$PWD/../config/
export CORE_PEER_TLS_ENABLED=true
export ORDERER_CA=${PWD}/../organizations/ordererOrganizations/ordererlink.com/tlsca/tlsca.ordererlink.com-cert.pem
export CHANNEL_NAME=druglink
export CC_NAME=insureChain

. ./switchPeer.sh 10

peer chaincode invoke -o orderer.ordererlink.com:7050 --ordererTLSHostnameOverride orderer.ordererlink.com --tls --cafile "$ORDERER_CA" --channelID $CHANNEL_NAME --name ${CC_NAME} --peerAddresses peer0.ranbaxy.com:6051 --tlsRootCertFiles "${PWD}/../organizations/peerOrganizations/ranbaxy.com/tlsca/tlsca.ranbaxy.com-cert.pem" --peerAddresses peer1.ranbaxy.com:7051 --tlsRootCertFiles "${PWD}/../organizations/peerOrganizations/ranbaxy.com/tlsca/tlsca.ranbaxy.com-cert.pem" --peerAddresses peer0.fda.com:8051 --tlsRootCertFiles "${PWD}/../organizations/peerOrganizations/fda.com/tlsca/tlsca.fda.com-cert.pem" --peerAddresses peer1.fda.com:9051 --tlsRootCertFiles "${PWD}/../organizations/peerOrganizations/fda.com/tlsca/tlsca.fda.com-cert.pem" --peerAddresses peer0.medlineindustries.com:1051 --tlsRootCertFiles "${PWD}/../organizations/peerOrganizations/medlineindustries.com/tlsca/tlsca.medlineindustries.com-cert.pem" --peerAddresses peer1.medlineindustries.com:1151 --tlsRootCertFiles "${PWD}/../organizations/peerOrganizations/medlineindustries.com/tlsca/tlsca.medlineindustries.com-cert.pem" --peerAddresses peer0.unitedhealthgroup.com:1251 --tlsRootCertFiles "${PWD}/../organizations/peerOrganizations/unitedhealthgroup.com/tlsca/tlsca.unitedhealthgroup.com-cert.pem" --peerAddresses peer1.unitedhealthgroup.com:1351 --tlsRootCertFiles "${PWD}/../organizations/peerOrganizations/unitedhealthgroup.com/tlsca/tlsca.unitedhealthgroup.com-cert.pem" -c '{"function":"createUser","Args":["2321344", "Parshant", "Khichi", "pk@gmail.com", "approved", "false", "bcp"]}' 



peer chaincode query -C $CHANNEL_NAME -n $CC_NAME -c '{"Args":["getAllusers"]}'


















127.0.0.1 ca_osqo
127.0.0.1 osqo.osqo.com
127.0.0.1 peer0.osqo.osqo.com
127.0.0.1 peer1.osqo.osqo.com

127.0.0.1 ca_bcp
127.0.0.1 bcp.osqo.com
127.0.0.1 peer0.bcp.osqo.com
127.0.0.1 peer1.bcp.osqo.com

127.0.0.1 ca_esp
127.0.0.1 esp.osqo.com
127.0.0.1 peer0.esp.osqo.com
127.0.0.1 peer1.esp.osqo.com

127.0.0.1 ca_broker
127.0.0.1 borker.osqo.com
127.0.0.1 peer0.broker.osqo.com
127.0.0.1 peer1.broker.osqo.com

127.0.0.1 ca_ordererlink
127.0.0.1 ordererlink.osqo.com
127.0.0.1 orderer.ordererlink.osqo.com
127.0.0.1 orderer2.ordererlink.osqo.com
127.0.0.1 orderer3.ordererlink.osqo.com
127.0.0.1 orderer4.ordererlink.osqo.com
127.0.0.1 orderer5.ordererlink.osqo.com